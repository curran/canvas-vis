//@ sourceMappingURL=02_ScatterPlot.map
// Generated by CoffeeScript 1.6.1
(function() {

  require(['cv/Component', 'cv/bindToCanvas', 'cv/readCSV', 'cv/Viewport', 'cv/Rectangle', 'cv/Varset', 'cv/Scale', 'cv/mark'], function(Component, bindToCanvas, readCSV, Viewport, Rectangle, Varset, Scale, mark) {
    return readCSV('../data/iris.csv', function(err, columns) {
      var ScatterPlot, point, position, scale, scales, varset, viewport, xVar, yVar, _i, _len;
      xVar = Varset.fromVariable(columns['petal length']);
      yVar = Varset.fromVariable(columns['sepal length']);
      varset = Varset.cross(xVar, yVar);
      scales = [new Scale(1), new Scale(2)];
      for (_i = 0, _len = scales.length; _i < _len; _i++) {
        scale = scales[_i];
        scale.init(varset);
      }
      ScatterPlot = Component.extend({
        paint: function(ctx, bounds) {
          var tuple, _j, _len1, _ref, _results;
          viewport.dest.copy(bounds);
          _ref = varset.tuples();
          _results = [];
          for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
            tuple = _ref[_j];
            _results.push((point(position(tuple))).render(ctx, viewport));
          }
          return _results;
        }
      });
      position = function(tuple) {
        return mark().x(scales[0].value(tuple)).y(scales[1].value(tuple));
      };
      point = function(mark) {
        return mark.size(0.05).shape('circle').fillStyle('rgba(0,0,0,0.2)');
      };
      viewport = new Viewport;
      return bindToCanvas('scatterPlot', new ScatterPlot);
    });
  });

}).call(this);
